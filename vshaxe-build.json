{
	"inherit": "vshaxe-node",
	"mainTarget": "language-server",
	"targets": [
		{
			"name": "language-server",
			"args": {
				"haxelibs": ["haxe-hxparser", "hxparse", "haxeparser", "tokentree", "formatter", "json2object", "vscode-json-rpc", "uglifyjs"],
				"classPaths": [
					"src",
					"protocol/src"
				],
				"defines": [
					"JSTACK_FORMAT=vscode",
					"uglifyjs_overwrite"
				],
				"output": {
					"target": "js",
					"path": "bin/server.js"
				},
				"macros": [
					"haxeLanguageServer.Init.run()"
				],
				"deadCodeElimination": "full",
				"main": "haxeLanguageServer.Main"
			}
		},
		{
			"name": "language-server-tests",
			"args": {
				"haxelibs": ["haxe-hxparser", "hxparse", "haxeparser", "tokentree", "formatter", "json2object", "vscode-json-rpc", "utest"],
				"classPaths": [
					"src",
					"test",
					"protocol/src"
				],
				"output": {
					"target": "js",
					"path": "bin/test.js"
				},
				"deadCodeElimination": "full",
				"main": "TestMain",
				"debug": true
			},
			"afterBuildCommands": [
				["node", "bin/test.js"]
			]
		}
	]
}